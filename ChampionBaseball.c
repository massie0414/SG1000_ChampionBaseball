#include "SGlib.h"
#include "PSGlib.h"

// 背景
const unsigned char bgTileData[] = {
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
#define bgTileDataSize 8
const unsigned char bgTileMapData[] = {
        0x00
};
#define bgTileMapDataSize 1
#define bgTileMapDataWidth 1
#define bgTileMapDataHeight 1

const unsigned char bgColourData[] = {
        0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
};
#define bgColourDataSize 8
// 背景 ここまで

// ピッチャー
const unsigned char pitcherTileData[] = {
        0x07,0x08,0x08,0x3F,0x0A,0x0A,0x04,0x0B,
        0x10,0x34,0x4F,0x48,0x3B,0x0A,0x1E,0x1E,
        0xE0,0x10,0x10,0xF0,0x50,0x50,0x20,0xD0,
        0x08,0x2C,0xF2,0x12,0xDC,0x50,0x78,0x78,

        0x07,0x08,0x38,0x5F,0x4A,0x3A,0x24,0x23,
        0x20,0x10,0x0F,0x08,0x0B,0x0A,0x1E,0x1E,
        0xE0,0x10,0x16,0xF9,0x59,0x56,0x24,0xC4,
        0x04,0x08,0xF0,0x10,0xD0,0x50,0x78,0x78,

        0x07,0x08,0x08,0x1F,0x0A,0x1A,0x24,0x27,
        0x18,0x04,0x3F,0x20,0x2F,0x79,0x7B,0x03,
        0xE0,0x10,0x10,0xF0,0x50,0x50,0x20,0xC0,
        0x40,0x40,0xC0,0x40,0x40,0x40,0xC0,0xC0,

        0x60,0x91,0x92,0x7A,0x27,0x12,0x0A,0x05,
        0x04,0x04,0x07,0x04,0x0D,0x0D,0x0E,0x00,
        0x00,0xF8,0x04,0x04,0xFE,0x94,0x94,0x08,
        0xF8,0x24,0xE4,0x38,0xA0,0xA0,0xF0,0xF0,

        0x00,0x00,0x01,0x02,0x02,0x03,0x06,0x0A,
        0x1B,0x1E,0x19,0x1C,0x03,0x01,0x01,0x01,
        0x00,0x00,0xF8,0x04,0x04,0xFE,0x94,0x94,
        0x08,0xF0,0x10,0xC8,0x66,0x59,0xE9,0xE6,
};

const unsigned char pitcherTileMask[] = {
        0x07,0x0F,0x0F,0x3F,0x0F,0x0F,0x07,0x0F, 0x1F,0x3F,0x7F,0x7F,0x3F,0x0E,0x1E,0x1E, 0xE0,0xF0,0xF0,0xF0,0xF0,0xF0,0xE0,0xF0, 0xF8,0xFC,0xFE,0xFE,0xFC,0x70,0x78,0x78,
        0x07,0x0F,0x3F,0x7F,0x7F,0x3F,0x3F,0x3F, 0x3F,0x1F,0x0F,0x0F,0x0F,0x0E,0x1E,0x1E, 0xE0,0xF0,0xF6,0xFF,0xFF,0xFE,0xFC,0xFC, 0xFC,0xF8,0xF0,0xF0,0xF0,0x70,0x78,0x78,
        0x07,0x0F,0x0F,0x1F,0x0F,0x1F,0x3F,0x3F, 0x1F,0x07,0x3F,0x3F,0x3F,0x79,0x7B,0x03, 0xE0,0xF0,0xF0,0xF0,0xF0,0xF0,0xE0,0xC0, 0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,
        0x60,0xF1,0xF3,0x7B,0x3F,0x1F,0x0F,0x07, 0x07,0x07,0x07,0x07,0x0F,0x0F,0x0E,0x00, 0x00,0xF8,0xFC,0xFC,0xFE,0xFC,0xFC,0xF8, 0xF8,0xFC,0xFC,0xF8,0xE0,0xE0,0xF0,0xF0,
        0x00,0x00,0x01,0x03,0x03,0x03,0x07,0x0F, 0x1F,0x1F,0x1F,0x1F,0x03,0x01,0x01,0x01, 0x00,0x00,0xF8,0xFC,0xFC,0xFE,0xFC,0xFC, 0xF8,0xF0,0xF0,0xF8,0xFE,0xDF,0xEF,0xE6,
};

#define pitcherTileDataSize 32*5
// ピッチャー ここまで

// バッター
const unsigned char batterTileData[] = {
        0x00,0x00,0x01,0x01,0x01,0x01,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0xC0,0x23,0x24,0x24,0x2F,0x97,0x97, 0x93,0x51,0x52,0x53,0x74,0x48,0x4F,0x3A,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x25,0x25,0x19,0x01,0x01,0x07,0x07,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0x08,0x08,0xF8,0xF8,0xF8, 0xF0,0xE0,0x10,0x88,0x08,0x08,0x88,0x08, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0x10,0x50,0x50,0x50,0xD0,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x03,0x04,0x04,0x0F,0x07,0x07, 0x03,0x01,0x02,0x02,0x0C,0x13,0x32,0x4C,
        0x00,0x03,0x04,0x08,0x11,0x12,0x0C,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0xCF,0x32,0x42,0x87,0x07,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0x08,0x08,0xF8,0xF8,0xF8, 0xF0,0xE0,0x10,0x08,0x88,0x08,0x48,0x48, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0x10,0xD0,0xD0,0xD0,0x50,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x7F,0x80,0x81,0x7E,0x00,0x00, 0x00,0x00,0x03,0x04,0x04,0x0F,0x07,0x07, 0x03,0x01,0xFF,0x2A,0xEB,0x1C,0x0F,0x02,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x01,0x01,0x01,0x03,0x03,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0x08,0x08,0xF8,0xF8,0xF8, 0xF0,0xE0,0x10,0x88,0x08,0x48,0x88,0x08, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0x10,0x50,0xD0,0xD0,0x50,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x0C,0x12,0x11,0x08,0x04,0x02,0x01, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x03,0x04,0x84,0x8F,0x47,0x27, 0xB3,0x49,0x4E,0x33,0x10,0x0C,0x03,0x02,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x01,0x01,0x01,0x03,0x03,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0x08,0x08,0xF8,0xF8,0xF8, 0xF0,0xE0,0x10,0x88,0x08,0x08,0x88,0x08, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0x10,0x50,0xD0,0xD0,0x50,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x03,0x04,0x04,0x0F,0x07,0x07, 0x07,0x09,0x0A,0x06,0x02,0x02,0x02,0x02,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x01,0x01,0x01,0x03,0x03,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x01,0xF2,0x0C,0x0C,0xF9,0xFA,0xFC, 0xF0,0xE0,0x10,0x08,0x08,0x08,0x08,0x08, 0x00,0x80,0x40,0x40,0x80,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0x10,0x50,0xD0,0xD0,0x50,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

const unsigned char batterTileMask[] = {
        0x00,0x00,0x01,0x01,0x01,0x01,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0xC0,0xE3,0xE7,0xE7,0xEF,0xF7,0xF7, 0xF3,0x71,0x73,0x73,0x77,0x7F,0x7F,0x3F,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x3D,0x3D,0x19,0x01,0x01,0x07,0x07,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0xF0,0xE0,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x03,0x07,0x07,0x0F,0x07,0x07, 0x03,0x01,0x03,0x03,0x0F,0x1F,0x3F,0x7F,
        0x00,0x03,0x07,0x0F,0x1F,0x1E,0x0C,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0xFF,0xF3,0xC3,0x87,0x07,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0xF0,0xE0,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0xF0,0xF0,0xF0,0xF0,0x70,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x7F,0xFF,0xFF,0x7E,0x00,0x00, 0x00,0x00,0x03,0x07,0x07,0x0F,0x07,0x07, 0x03,0x01,0xFF,0xFF,0xFF,0x1F,0x0F,0x03,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x01,0x01,0x01,0x03,0x03,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0xF0,0xE0,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0xF0,0xF0,0xF0,0xF0,0x70,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x0C,0x1E,0x1F,0x0F,0x07,0x03,0x01, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x03,0x07,0x87,0x8F,0xC7,0xE7, 0xF3,0x79,0x7F,0x3F,0x1F,0x0F,0x03,0x03,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x01,0x01,0x01,0x03,0x03,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0xF0,0xE0,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0xF0,0xF0,0xF0,0xF0,0x70,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x03,0x07,0x07,0x0F,0x07,0x07, 0x07,0x0F,0x0F,0x07,0x03,0x03,0x03,0x03,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x01,0x01,0x01,0x03,0x03,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x01,0xF3,0xFF,0xFF,0xFF,0xFE,0xFC, 0xF0,0xE0,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8, 0x00,0x80,0xC0,0xC0,0x80,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xF0,0xF0,0xF0,0xF0,0xF0,0x70,0xF0,0xF0, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

#define batterTileDataSize 8 * 16 * 5
// バッター ここまで

// ボール
const unsigned char ballTileData[] = {
        0x3C,0x66,0xC3,0x81,0x81,0xC3,0x66,0x3C,
};

const unsigned char ballTileMask[] = {
        0x3C,0x7E,0xFF,0xFF,0xFF,0xFF,0x7E,0x3C,
};
#define ballTileDataSize 8
// ボール ここまで


void main (void)
{
    SG_setSpriteMode (SG_SPRITEMODE_LARGE);

    unsigned int tilefrom = 0;  // 開始位置

    // VRAM0000番台に書き込む
    // Tileの書き込み
    for ( int i = 0; i < 3; i++ ){
        SG_loadTilePatterns(
            bgTileData,
            tilefrom+256*i,
            bgTileDataSize
        );
    }

    // VRAM2000番台に書き込む
    // 色の書き込み
    for ( int i = 0; i < 3; i++ ){
        SG_loadTileColours(
            bgColourData,
            tilefrom+256*i,
            bgColourDataSize
        );
    }

    // VRAM1800番台に書き込む
    // タイルマップの書き込み
    unsigned char x = 0;
    unsigned char y = 0;
    SG_loadTileMapArea(
		x,
		y,
		bgTileMapData,
		bgTileMapDataWidth,
		bgTileMapDataHeight
    );

    // ピッチャー
    unsigned char pitcherX = 256 / 2 - 16 / 2;
    unsigned char pitcherY = 0;
    
    // バッター
    unsigned char batterX = 256 / 2 - 16 / 2;
    unsigned char batterY = 192 - 24;

    // ボール
    unsigned char ballX = 256 / 2 - 16 / 2;
    unsigned char ballY = 16;

    // VRAM3800番台に書き込む
    // スプライトの書き込み
    
    unsigned int spriteSize = 0;

    // ピッチャー 4バイト x 5パターン
    tilefrom = spriteSize;  // 開始位置
    unsigned int pitcherTileAddress1 = tilefrom;
    SG_loadSpritePatterns(
        pitcherTileData,
        tilefrom,
        pitcherTileDataSize
    );
    spriteSize += 4 * 5;

    // ピッチャーマスク（２色目） 4バイト x 5パターン
    tilefrom = spriteSize;  // 開始位置
    unsigned int pitcherTileAddress2 = tilefrom;
    SG_loadSpritePatterns(
        pitcherTileMask,
        tilefrom,
        pitcherTileDataSize
    );
    spriteSize += 4 * 5;
    
    // バッター 16バイト x 5パターン
    tilefrom = spriteSize;  // 開始位置
    unsigned int batterTileAddress1 = tilefrom;
    SG_loadSpritePatterns(
        batterTileData,
        tilefrom,
        batterTileDataSize
    );
    spriteSize += 16 * 5;

    // バッター（２色目） 16バイト x 5パターン
    tilefrom = spriteSize;  // 開始位置
    unsigned int batterTileAddress2 = tilefrom;
    SG_loadSpritePatterns(
        batterTileMask,
        tilefrom,
        batterTileDataSize
    );
    spriteSize += 16 * 5;

    // ボール 1バイト
    tilefrom = spriteSize;  // 開始位置
    unsigned int ballTileAddress1 = tilefrom;
    SG_loadSpritePatterns(
        ballTileData,
        tilefrom,
        ballTileDataSize
    );
    spriteSize += 4;

    // ボール（２色目） 1バイト
    tilefrom = spriteSize;  // 開始位置
    unsigned int ballTileAddress2 = tilefrom;
    SG_loadSpritePatterns(
        ballTileMask,
        tilefrom,
        ballTileDataSize
    );
    spriteSize += 4;

    unsigned char isPitching = 0;
    unsigned char pitchingCount = 0;

    unsigned char isBatting = 0;
    unsigned char battingCount = 0;

    signed char ballSpeed = 2;

    // ディスプレイをオンにします
    SG_displayOn(); 

    while (1) {
        // ゲームループ

        /*
        // ピッチャーを左右に移動
        if ( SG_getKeysHeld () == PORT_A_KEY_LEFT ){
            pitcherX--;
        }
        if ( SG_getKeysHeld () == PORT_A_KEY_RIGHT ){
            pitcherX++;
        }

        // バッターを左右に移動
        if ( SG_getKeysHeld () == PORT_B_KEY_LEFT ){
            batterX--;
        }
        if ( SG_getKeysHeld () == PORT_B_KEY_RIGHT ){
            batterX++;
        }
        */

        // １PADの１ボタンを押したら、ボールを投げる
        if ( SG_getKeysPressed () == PORT_A_KEY_1 ){
            isPitching = 1;
        }

        if ( isPitching == 1 ) {
            pitchingCount++;
            if ( pitchingCount > 40 ) {
                pitchingCount = 40;
            }
            pitcherTileAddress1 = 0x04 * ( pitchingCount / 10 );    // TODO 0x04が変更される可能性あり
            pitcherTileAddress2 = (4 * 5) + 0x04 * ( pitchingCount / 10 );    // TODO 4*5が変更される可能性あり
        }

        // ２PADの１ボタンを押したら、ボールを投げる
        if ( SG_getKeysPressed () == PORT_B_KEY_1 ){
            isBatting = 1;
        }

        if ( isBatting == 1 ) {
            battingCount++;
            if ( battingCount == 10 ) {
                ballSpeed = -2;
            }
            if ( battingCount >= 25 ) {
                battingCount = 0;
                isBatting = 0;
                batterTileAddress1 = (4 * 5 * 2);              // TODO 変更される可能性あり
                batterTileAddress2 = (4 * 5 * 2) + ( 16 * 5 ); // TODO 変更される可能性あり
            }
            else {
                batterTileAddress1 = (4 * 5 * 2)              + 0x10 * ( battingCount / 5 );    // TODO 変更される可能性あり
                batterTileAddress2 = (4 * 5 * 2) + ( 16 * 5 ) + 0x10 * ( battingCount / 5 );    // TODO 変更される可能性あり
            }
        }

        // スプライトを表示する
        SG_initSprites ();

        // ボール
        if ( pitchingCount == 40 ) {
            SG_addSprite (ballX, ballY, ballTileAddress1, SG_COLOR_BLACK);	// ボール
            SG_addSprite (ballX, ballY, ballTileAddress2, SG_COLOR_WHITE);	// ボール(２色目)
            ballY += ballSpeed;
            if ( ballY >= 192 || ballY < 16 ) {
                ballY = 16;
                ballSpeed = 2;
                pitchingCount = 0;
                isPitching = 0;
                pitcherTileAddress1 = 0x00; // TODO 変わる可能性あり
                pitcherTileAddress2 = (4 * 5); // TODO 変わる可能性あり
            }
        }

        SG_addSprite (pitcherX  , pitcherY  , pitcherTileAddress1     , SG_COLOR_BLACK);	// ピッチャー
        SG_addSprite (pitcherX  , pitcherY  , pitcherTileAddress2     , SG_COLOR_WHITE);	// ピッチャー(２色目)
        SG_addSprite (batterX   , batterY   , batterTileAddress1 + 0x00, SG_COLOR_BLACK);	// バッター
        SG_addSprite (batterX   , batterY+16, batterTileAddress1 + 0x04, SG_COLOR_BLACK);	// バッター
        SG_addSprite (batterX+16, batterY   , batterTileAddress1 + 0x08, SG_COLOR_BLACK);	// バッター
        SG_addSprite (batterX+16, batterY+16, batterTileAddress1 + 0x0C, SG_COLOR_BLACK);	// バッター
        SG_addSprite (batterX   , batterY   , batterTileAddress2 + 0x00, SG_COLOR_WHITE);	// バッター(２色目)
        SG_addSprite (batterX   , batterY+16, batterTileAddress2 + 0x04, SG_COLOR_WHITE);	// バッター(２色目)
        SG_addSprite (batterX+16, batterY   , batterTileAddress2 + 0x08, SG_COLOR_WHITE);	// バッター(２色目)
        SG_addSprite (batterX+16, batterY+16, batterTileAddress2 + 0x0C, SG_COLOR_WHITE);	// バッター(２色目)
        
        SG_finalizeSprites ();
        SG_copySpritestoSAT ();

        // 次のVBlankが開始するまで待ちます
        SG_waitForVBlank ();
    }
}
